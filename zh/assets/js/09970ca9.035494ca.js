"use strict";(self.webpackChunksearch_party_lab=self.webpackChunksearch_party_lab||[]).push([[3547],{7999:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>s,metadata:()=>i,toc:()=>d});var t=r(4848),o=r(8453);const s={sidebar_position:78},c="\ud83d\udc50 \u5c06\u8bed\u4e49\u641c\u7d22\u6dfb\u52a0\u5230\u60a8\u7684\u5e94\u7528\u7a0b\u5e8f",i={id:"vector-search/add-to-app",title:"\ud83d\udc50 \u5c06\u8bed\u4e49\u641c\u7d22\u6dfb\u52a0\u5230\u60a8\u7684\u5e94\u7528\u7a0b\u5e8f",description:"\u60a8\u73b0\u5728\u77e5\u9053\u4e86\u5c06\u5411\u91cf\u641c\u7d22\u529f\u80fd\u6dfb\u52a0\u5230\u5e94\u7528\u7a0b\u5e8f\u6240\u9700\u7684\u4e00\u5207\u3002",source:"@site/i18n/zh/docusaurus-plugin-content-docs/current/7-vector-search/8-add-to-app.mdx",sourceDirName:"7-vector-search",slug:"/vector-search/add-to-app",permalink:"/search-lab/zh/docs/vector-search/add-to-app",draft:!1,unlisted:!1,editUrl:"https://github.com/mongodb-developer/search-lab/blob/main/docs/7-vector-search/8-add-to-app.mdx",tags:[],version:"current",sidebarPosition:78,frontMatter:{sidebar_position:78},sidebar:"tutorialSidebar",previous:{title:"\ud83d\udc50 \u521b\u5efa\u5411\u91cf\u641c\u7d22\u7d22\u5f15",permalink:"/search-lab/zh/docs/vector-search/create-index"},next:{title:"\ud83e\uddb8\u200d\u2642\ufe0f \u9884\u8fc7\u6ee4\u6570\u636e",permalink:"/search-lab/zh/docs/vector-search/filtering"}},a={},d=[{value:"\u914d\u7f6e\u5411\u91cf\u641c\u7d22\u67e5\u8be2",id:"\u914d\u7f6e\u5411\u91cf\u641c\u7d22\u67e5\u8be2",level:2},{value:"\u6d4b\u8bd5\u8bed\u4e49\u641c\u7d22",id:"\u6d4b\u8bd5\u8bed\u4e49\u641c\u7d22",level:2}];function l(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components},{Details:r}=n;return r||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"-\u5c06\u8bed\u4e49\u641c\u7d22\u6dfb\u52a0\u5230\u60a8\u7684\u5e94\u7528\u7a0b\u5e8f",children:"\ud83d\udc50 \u5c06\u8bed\u4e49\u641c\u7d22\u6dfb\u52a0\u5230\u60a8\u7684\u5e94\u7528\u7a0b\u5e8f"})}),"\n",(0,t.jsx)(n.p,{children:"\u60a8\u73b0\u5728\u77e5\u9053\u4e86\u5c06\u5411\u91cf\u641c\u7d22\u529f\u80fd\u6dfb\u52a0\u5230\u5e94\u7528\u7a0b\u5e8f\u6240\u9700\u7684\u4e00\u5207\u3002"}),"\n",(0,t.jsx)(n.h2,{id:"\u914d\u7f6e\u5411\u91cf\u641c\u7d22\u67e5\u8be2",children:"\u914d\u7f6e\u5411\u91cf\u641c\u7d22\u67e5\u8be2"}),"\n",(0,t.jsxs)(n.p,{children:["\u518d\u6b21\u6253\u5f00 ",(0,t.jsx)(n.code,{children:"server/src/controllers/books.ts"})," ",(0,t.jsx)(n.a,{href:"https://github.com/mongodb-developer/library-management-system/blob/main/server/src/controllers/books.ts",children:"\u6587\u4ef6"}),"\uff0c\u5e76\u7f16\u8f91 ",(0,t.jsx)(n.code,{children:"searchBooks"})," \u65b9\u6cd5\uff0c\u4ee5\u67e5\u8be2\u60a8\u7684\u8bed\u4e49\u641c\u7d22\u6570\u636e\u3002"]}),"\n",(0,t.jsx)(n.admonition,{type:"tip",children:(0,t.jsxs)(n.p,{children:["\u4f7f\u7528 ",(0,t.jsx)(n.code,{children:"getEmbeddings"})," \u51fd\u6570\u5c06\u67e5\u8be2\u8f6c\u6362\u4e3a\u5411\u91cf\u3002"]})}),"\n",(0,t.jsxs)(r,{children:[(0,t.jsx)("summary",{children:"\u7b54\u6848"}),(0,t.jsx)("div",{children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"public async searchBooks(query: string): Promise<Book[]> {\n  const vector = await getEmbeddings(query);\n  const aggregationPipeline = [\n    {\n      $vectorSearch: {\n        queryVector:  vector,\n        path: 'embeddings',\n        numCandidates: 100,\n        index: 'vectorsearch',\n        limit: 100,\n      }\n    }\n  ];\n  const books = await collections?.books?.aggregate(aggregationPipeline).toArray() as Book[];\n  return books;\n}\n"})})})]}),"\n",(0,t.jsx)(n.h2,{id:"\u6d4b\u8bd5\u8bed\u4e49\u641c\u7d22",children:"\u6d4b\u8bd5\u8bed\u4e49\u641c\u7d22"}),"\n",(0,t.jsx)(n.p,{children:"\u8981\u5728\u5e94\u7528\u7a0b\u5e8f\u4e2d\u6d4b\u8bd5\u8bed\u4e49\u641c\u7d22\uff0c\u8bf7\u5c1d\u8bd5\u641c\u7d22\u4e00\u4e9b\u4e66\u7c4d\uff0c\u4f46\u4f7f\u7528\u4e0d\u540c\u7684\u8bcd\u8bed\uff0c\u8fd9\u4e9b\u8bcd\u8bed\u5177\u6709\u76f8\u4f3c\u7684\u542b\u4e49\u6216\u4e0e\u4e66\u7c4d\u5c01\u9762\u76f8\u5173\u3002"}),"\n",(0,t.jsx)(n.p,{children:"\u60a8\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u77ed\u8bed\u8fdb\u884c\u67e5\u8be2\uff1a"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u72d7\u72d7\u505a\u4e8b\u60c5"}),"\n",(0,t.jsx)(n.li,{children:"\u6bdb\u7ed2\u7ed2\u7684\u52a8\u7269"}),"\n",(0,t.jsx)(n.li,{children:"\u6b27\u6d32\u5386\u53f2"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>c,x:()=>i});var t=r(6540);const o={},s=t.createContext(o);function c(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:c(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);